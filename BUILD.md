# Настройка окружения и компиляция приложения

Программа написана как проект cmake с использованием библиотеки Qt6. Далее описан процесс настройки окружения и компиляции под Qt Creator и mingw.

Версии под другие ОС и MSVC пока в планах.

## Windows

### MINGW

#### 1. Установить программы
* https://download.qt.io/, скачать online-инсталлятор (возможно, из России понадобится зарубежный VPN) и установить следующие компоненты:
    * Qt [X.X.X]
        * MinGW YY.Y.Y
        * Sources
    * Qt Developer and Designer tools
        * Qt Creator
        * Mingw YY.Y.Y (Версия, соответствующая компилятору библиотеки в предыдущем пункте)
        * cmake
        * ninja

#### 2. Настроить debug-версию в Qt Creator
* Если нужна полная очистка, удалить файлы __CMakeLists.txt.user*__.
* Скопировать файлы из директории deploy в build-директорию приложения (config.json и languages)

#### 2.1. Обновление языковых файлов
~~~
cd папка-с-CMakeLists.txt-проекта
\путь-к-программе\cmake.exe --build build/Desktop_Qt_6_8_1_MinGW_64_bit-Debug --target update_translations
~~~
* Путь после __--build__ должен указывать на build-директорию, установленную в конфигурации проекта.
* Команду надо выполнять на той же платформе, где происходил препроцессинг CMakeLists.txt.
* Далее файлы .ts редактруются с помощью Linguist из Qt Creator.

#### 3. Сборка release-версии
* Настроить статическую версию Qt и добавить ее в Qt Creator.
* Обновить версию приложения в CMakeLists.txt, пересканировать проект (Rescan project), чтобы версия прописалась в заголовочные файлы.
* Закоммитить изменения.
* Откомпилировать приложение
* Собрать архив:
    * Файл exe.
    * Директорию build/XXX/languages с файлами .qm.
    * Содержимое директории deploy (значки языков, файлы конфигурации, лицензию и пр.)
* Загрузить как релиз на GitHub, добавив последнему коммиту тег с номером версии.
